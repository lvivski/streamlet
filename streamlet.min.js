!function(t){"use strict";function n(){this.__listeners__=[],this.isDone=!1}function e(t,n,e){u(function(){for(var o=0;o<t.length;){var i=t[o++],r=i.update,u=i.done;e?s(u)&&u():r(n)}})}function o(){n.call(this)}function i(t,n,e){for(var o=0;o<t.length;){var i=t[o++],r=i.update,u=i.done;e?s(u)&&u():r(n)}}function r(t,n){var e=new o;return t.addEventListener(n,function(t){e.add(t)},!1),e}function s(t){return t&&"function"==typeof t}var u;"function"==typeof define&&define.amd?define(["subsequent"],function(t){return u=t,n}):"object"==typeof module&&module.exports?(module.exports=n,u=require("subsequent")):(t.Streamlet=n,u=t.subsequent),n.prototype.add=function(t){this.isDone||e(this.__listeners__,t)},n.prototype.done=function(){this.isDone||(this.isDone=!0,e(this.__listeners__,null,!0),this.__listeners__=void 0)},n.prototype.listen=function(t,n){if(!this.isDone){var e=this.__listeners__,o={update:t,done:n};return e.push(o),function(){var t=e.indexOf(o);e.splice(t,1)}}},n.prototype.transform=function(t){var n=new this.constructor;return this.listen(t(n)),n},n.prototype.map=function(t){return this.transform(function(n){return function(e){e=t(e),n.add(e)}})},n.prototype.filter=function(t){return this.transform(function(n){return function(e){t(e)&&n.add(e)}})},n.prototype.skip=function(t){return this.transform(function(n){return function(e){t-->0?n.done():n.add(e)}})},n.prototype.take=function(t){return this.transform(function(n){return function(e){t-->0?n.add(e):n.done()}})},n.prototype.expand=function(t){return this.transform(function(n){return function(e){e=t(e);for(var o in e)n.add(e[o])}})},n.prototype.merge=function(t){var n=new this.constructor,e=function(t){n.add(t)};return this.listen(e),t.listen(e),n},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.add=function(t){this.isDone||i(this.__listeners__,t)},o.prototype.done=function(){this.isDone||(this.isDone=!0,i(this.__listeners__,null,!0),this.__listeners__=void 0)},"undefined"!=typeof window&&(window.on=Node.prototype.on=function(t){return new r(this,t)})}(this);
//# sourceMappingURL=streamlet.min.js.map