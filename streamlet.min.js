!function(e){"use strict";function r(e){if(!o(e))throw new TypeError("Observable initializer must be a function");this.__subscriber__=e}function t(e,r){if(!i(e))throw new TypeError("Observer must be an object");if(this.__observer__=e,this.__cleanup__=void 0,!o(e.start)||(e.start(this),!t.isClosed(this))){e=new n(this);try{var c;c=r.length>1?r(function(r){return e.next(r)},function(r){return e.error(r)},function(r){return e.complete(r)}):r(e),null!=c&&(o(c.unsubscribe)?c=t.wrapCleanup(c):u(c||1),this.__cleanup__=c)}catch(r){e.error(r)}t.isClosed(this)&&t.cleanup(this)}}function n(e){this.__subscription__=e}function o(e){return"function"==typeof e}function i(e){return e&&"object"==typeof e}function u(e){if(e&&!o(e))throw new TypeError(e+" is not a function");return e}function c(e,r,t){Object.defineProperty(e,r,{get:t,enumerable:!1,configurable:!0})}function s(e,r,t){Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!1,configurable:!0})}"function"==typeof define&&define.amd?define(["davy"],function(e){return r}):"object"==typeof module&&module.exports?module.exports=r:e.Streamlet=r,s(r.prototype,"@@observable",function(){return this}),s(r.prototype,"subscribe",function(e){if(o(e)){var r=Array.prototype.slice.call(arguments,1);e={next:e,error:r[0],complete:r[1]}}return new t(e,this.__subscriber__)}),r.prototype.forEach=function(e){var r=this;return new Promise(function(t,n){return o(e)?r.subscribe({next:function(r){try{return e(r)}catch(e){n(e)}},error:n,complete:t}):Promise.reject(new TypeError(e+" is not a function"))})},r.prototype.transform=function(e){var t=this;return new r(function(r){return t.subscribe(e(r),function(e){return r.error(e)},function(e){return r.complete(e)})})},t.prototype={},s(t.prototype,"unsubscribe",function(){t.unsubscribe(this)}),c(t.prototype,"closed",function(){return t.isClosed(this)}),t.isClosed=function(e){return void 0===e.__observer__},t.wrapCleanup=function(e){return function(){e.unsubscribe()}},t.unsubscribe=function(e){t.isClosed(e)||(e.__observer__=void 0,t.cleanup(e))},t.cleanup=function(e){var r=e.__cleanup__;r&&(e.__cleanup__=void 0,r())},n.prototype={},c(n.prototype,"closed",function(){return t.isClosed(this.__subscription__)}),s(n.prototype,"next",function(e){return n.next(this.__subscription__,e)}),s(n.prototype,"error",function(e){return n.error(this.__subscription__,e)}),s(n.prototype,"complete",function(e){return n.complete(this.__subscription__,e)}),n.SUCCESS="next",n.FAILURE="error",n.DONE="complete",n.next=function(e,r){return n.handle(e,n.SUCCESS,r)},n.error=function(e,r){return n.handle(e,n.FAILURE,r)},n.complete=function(e,r){return n.handle(e,n.DONE,r)},n.isDone=function(e){return e===n.DONE||e===n.FAILURE},n.handle=function(e,r,o){if(!t.isClosed(e)){var i=e.__observer__;n.isDone(r)&&(e.__observer__=void 0);try{var c=u(i[r]);if(c)o=c(o);else{if(r===n.FAILURE)throw o;o=void 0}}catch(o){try{r===n.SUCCESS?t.unsubscribe(e):t.cleanup(e)}finally{throw o}}return n.isDone(r)&&t.cleanup(e),o}if(r===n.FAILURE)throw o},s(r,"of",function(){var e=Array.prototype.slice.call(arguments);return new(o(this)?this:r)(function(r){for(var t=0;t<e.length;++t)r.next(e[t]);r.complete()})}),s(r,"from",function(e){if(!i(e))throw new TypeError(e+" is not an object");var t=o(this)?this:r,n=u(e["@@observable"]);if(n){var c=n.call(e);if(Object(c)!==c)throw new TypeError(c+" is not an object");return c.constructor===t?c:new t(function(e){return c.subscribe(e)})}if(i(e)&&o(e.next))return new t(function(r){for(var t;!(t=e.next()).done;)r.next(t.value);r.complete()});if(Array.isArray(e))return new t(function(r){for(var t=0;t<e.length;++t)r.next(e[t]);r.complete()});throw new TypeError(e+" is not observable")})}(Function("return this")());
//# sourceMappingURL=streamlet.min.js.map