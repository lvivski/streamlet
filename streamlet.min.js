!function(e){"use strict";function t(e){if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this.__subscriber__=e}function r(e,t){if("object"!=typeof e)throw new TypeError("Observer must be an object");if(this.__observer__=e,this.__cleanup__=void 0,"function"!=typeof e.start||(e.start(this),!r.isClosed(this))){e=new n(this);try{var o=t(e);if(null!=o){if("function"==typeof o.unsubscribe)o=r.wrapCleanup(o);else if("function"!=typeof o)throw new TypeError(o+" is not a function");this.__cleanup__=o}}catch(e){n.error(this,e)}r.isClosed(this)&&r.cleanup(this)}}function n(e){this.__subscription__=e}"function"==typeof define&&define.amd?define(["davy"],function(e){return t}):"object"==typeof module&&module.exports?module.exports=t:e.Streamlet=t,t.prototype["@@observable"]=function(){return this},t.prototype.subscribe=function(e){if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e={next:e,error:t[0],complete:t[1]}}return new r(e,this.__subscriber__)},t.prototype.forEach=function(e){var t=this;return new Promise(function(r,n){return"function"!=typeof e?Promise.reject(new TypeError(e+" is not a function")):t.subscribe({next:function(t){try{return e(t)}catch(e){n(e)}},error:n,complete:r})})},r.prototype={},r.prototype.unsubscribe=function(){r.unsubscribe(this)},Object.defineProperty(r.prototype,"closed",{get:function(){return r.isClosed(this)},configurable:!0}),r.isClosed=function(e){return void 0===e.__observer__},r.wrapCleanup=function(e){return function(){e.unsubscribe()}},r.unsubscribe=function(e){r.isClosed(e)||(e.__observer__=void 0,r.cleanup(e))},r.cleanup=function(e){var t=e.__cleanup__;t&&(e.__cleanup__=void 0,t())},n.prototype={},Object.defineProperty(n.prototype,"closed",{get:function(){return r.isClosed(this.__subscription__)},configurable:!0}),n.prototype.next=function(e){return n.next(this.__subscription__,e)},n.prototype.error=function(e){return n.error(this.__subscription__,e)},n.prototype.complete=function(e){return n.complete(this.__subscription__,e)},n.SUCCESS="next",n.FAILURE="error",n.DONE="complete",n.next=function(e,t){return n.handle(e,n.SUCCESS,t)},n.error=function(e,t){return n.handle(e,n.FAILURE,t)},n.complete=function(e,t){return n.handle(e,n.DONE,t)},n.handle=function(e,t,o){if(r.isClosed(e)&&t===n.FAILURE)throw o;if(!r.isClosed(e)){var i=e.__observer__;t===n.DONE&&(e.__observer__=void 0);try{var u=i[t];if(u){if("function"!=typeof u)throw new TypeError(u+" is not a function");o=u(o)}else{if(t===n.FAILURE)throw o;o=void 0}}catch(o){try{t===n.SUCCESS?r.unsubscribe(e):r.cleanup(e)}finally{throw o}}return t!==n.DONE&&t!==n.FAILURE||(r.unsubscribe(e),r.cleanup(e)),o}},t.of=function(){var e=Array.prototype.slice.call(arguments);return new t(function(t){for(var r=0;r<e.length;++r)t.next(e[r]);t.complete()})},t.from=function(e){if(null==e)throw new TypeError(e+" is not an object");var r=e["@@observable"];if("function"==typeof r){var n=r.call(e);if(Object(n)!==n)throw new TypeError(n+" is not an object");return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}if("object"==typeof e&&"function"==typeof e.next)return new t(function(t){for(var r;!(r=e.next()).done;)t.next(r.value);t.complete()});if(Array.isArray(e))return new t(function(t){for(var r=0;r<e.length;++r)t.next(e[r]);t.complete()});throw new TypeError(e+" is not observable")}}(Function("return this")());
//# sourceMappingURL=streamlet.min.js.map