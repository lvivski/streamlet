!function(t){"use strict";function n(){this.__listeners__=[],this.isDone=!1}function e(){n.call(this)}function r(t,n){var r=new e;return t.addEventListener(n,function(t){r.add(t)},!1),r}function o(t){return t&&"function"==typeof t}function i(t){if(1===t.length&&Array.isArray(t[0]))return t[0];for(var n=new Array(t.length),e=0;e<n.length;++e)n[e]=t[e];return n}function u(t,n,e){for(var r=0;r<t.length;){var i=t[r++],u=i.update,s=i.done;e?o(s)&&s():u(n)}}function s(t){var n=Array.prototype.slice.call(arguments,1);f(function(){t.apply(null,n)})}var f;"function"==typeof define&&define.amd?define(["subsequent"],function(t){return f=t,n}):"object"==typeof module&&module.exports?(module.exports=n,f=require("subsequent")):(t.Streamlet=n,f=t.subsequent),n.prototype.add=function(t){this.isDone||s(u,this.__listeners__,t)},n.prototype.done=function(){this.isDone||(this.isDone=!0,s(u,this.__listeners__,null,!0),this.__listeners__=void 0)},n.prototype.listen=function(t,n){if(!this.isDone){var e=this.__listeners__,r={update:t,done:n};return e.push(r),function(){var t=e.indexOf(r);e.splice(t,1)}}},n.prototype.transform=function(t){var n=new this.constructor;return this.listen(t(n)),n},n.prototype.map=function(t){return this.transform(function(n){return function(e){e=t(e),n.add(e)}})},n.prototype.filter=function(t){return this.transform(function(n){return function(e){t(e)&&n.add(e)}})},n.prototype.skip=function(t){return this.transform(function(n){return function(e){t-->0?n.done():n.add(e)}})},n.prototype.take=function(t){return this.transform(function(n){return function(e){t-->0?n.add(e):n.done()}})},n.prototype.expand=function(t){return this.transform(function(n){return function(e){e=t(e);for(var r in e)n.add(e[r])}})},n.prototype.merge=function(t){return n.merge(this,t)},n.merge=function(t){t=i(t);var e=new n,r=function(t){e.add(t)};if(!t.length)return e;for(var o=0;o<t.length;)t[o++].listen(r);return e},e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.add=function(t){this.isDone||u(this.__listeners__,t)},e.prototype.done=function(){this.isDone||(this.isDone=!0,u(this.__listeners__,null,!0),this.__listeners__=void 0)},"undefined"!=typeof window&&(window.on=Node.prototype.on=function(t){return new r(this,t)})}(this);
//# sourceMappingURL=streamlet.min.js.map