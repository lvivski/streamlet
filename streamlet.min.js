!function(e){"use strict";function t(e){if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this.__subscriber__=e}function n(e,t){if("object"!=typeof e)throw new TypeError("Observer must be an object");if(this.__observer__=e,this.__cleanup__=void 0,"function"!=typeof e.start||(e.start(this),!n.isClosed(this))){e=new r(this);try{var o=t(e);if(null!=o){if("function"==typeof o.unsubscribe)o=n.wrapCleanup(o);else if("function"!=typeof o)throw new TypeError(o+" is not a function");this.__cleanup__=o}}catch(e){r.error(this,e)}n.isClosed(this)&&n.cleanup(this)}}function r(e){this.__subscription__=e}function o(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!1,configurable:!0})}function i(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0})}"function"==typeof define&&define.amd?define(["davy"],function(e){return t}):"object"==typeof module&&module.exports?module.exports=t:e.Streamlet=t,i(t.prototype,"@@observable",function(){return this}),i(t.prototype,"subscribe",function(e){if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e={next:e,error:t[0],complete:t[1]}}return new n(e,this.__subscriber__)}),t.prototype.forEach=function(e){var t=this;return new Promise(function(n,r){return"function"!=typeof e?Promise.reject(new TypeError(e+" is not a function")):t.subscribe({next:function(t){try{return e(t)}catch(e){r(e)}},error:r,complete:n})})},n.prototype={},i(n.prototype,"unsubscribe",function(){n.unsubscribe(this)}),o(n.prototype,"closed",function(){return n.isClosed(this)}),n.isClosed=function(e){return void 0===e.__observer__},n.wrapCleanup=function(e){return function(){e.unsubscribe()}},n.unsubscribe=function(e){n.isClosed(e)||(e.__observer__=void 0,n.cleanup(e))},n.cleanup=function(e){var t=e.__cleanup__;t&&(e.__cleanup__=void 0,t())},r.prototype={},o(r.prototype,"closed",function(){return n.isClosed(this.__subscription__)}),i(r.prototype,"next",function(e){return r.next(this.__subscription__,e)}),i(r.prototype,"error",function(e){return r.error(this.__subscription__,e)}),i(r.prototype,"complete",function(e){return r.complete(this.__subscription__,e)}),r.SUCCESS="next",r.FAILURE="error",r.DONE="complete",r.next=function(e,t){return r.handle(e,r.SUCCESS,t)},r.error=function(e,t){return r.handle(e,r.FAILURE,t)},r.complete=function(e,t){return r.handle(e,r.DONE,t)},r.handle=function(e,t,o){if(n.isClosed(e)&&t===r.FAILURE)throw o;if(!n.isClosed(e)){var i=e.__observer__;t===r.DONE&&(e.__observer__=void 0);try{var u=i[t];if(u){if("function"!=typeof u)throw new TypeError(u+" is not a function");o=u(o)}else{if(t===r.FAILURE)throw o;o=void 0}}catch(o){try{t===r.SUCCESS?n.unsubscribe(e):n.cleanup(e)}finally{throw o}}return t!==r.DONE&&t!==r.FAILURE||(n.unsubscribe(e),n.cleanup(e)),o}},i(t,"of",function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof this?this:t;return new n(function(t){for(var n=0;n<e.length;++n)t.next(e[n]);t.complete()})}),i(t,"from",function(e){if(null==e)throw new TypeError(e+" is not an object");var n="function"==typeof this?this:t,r=e["@@observable"];if("function"==typeof r){var o=r.call(e);if(Object(o)!==o)throw new TypeError(o+" is not an object");return o.constructor===n?o:new n(function(e){return o.subscribe(e)})}if("object"==typeof e&&"function"==typeof e.next)return new n(function(t){for(var n;!(n=e.next()).done;)t.next(n.value);t.complete()});if(Array.isArray(e))return new n(function(t){for(var n=0;n<e.length;++n)t.next(e[n]);t.complete()});throw new TypeError(e+" is not observable")})}(Function("return this")());
//# sourceMappingURL=streamlet.min.js.map